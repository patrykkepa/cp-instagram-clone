{"version":3,"sources":["firebase.js","Post.js","ImageUpload.js","App.js","index.js"],"names":["db","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","auth","storage","Post","postId","user","username","caption","imgURL","useState","comments","setComments","comment","setComment","useEffect","unsubscribe","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","className","Avatar","alt","src","text","type","placeholder","value","onChange","e","target","disabled","onClick","event","preventDefault","add","displayName","timestamp","FieldValue","serverTimestamp","ImageUpload","props","image","setImage","progress","setProgress","setCaption","max","files","Button","ref","name","put","on","Math","round","bytesTransferred","totalBytes","error","console","log","alert","message","child","getDownloadURL","then","url","getModalStyle","top","left","transform","useStyles","makeStyles","theme","paper","position","width","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","App","classes","modalStyle","posts","setPosts","open","setOpen","openSignIn","setOpenSignIn","setUsername","email","setEmail","password","setPassword","setUser","onAuthStateChanged","authUser","id","post","Modal","onClose","style","Input","createUserWithEmailAndPassword","updateProfile","catch","signInWithEmailAndPassword","signOut","key","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5360cee2.chunk.js","sourcesContent":["import firebase from \"firebase\";\n\nconst firebaseApp = firebase.initializeApp({\n    apiKey: \"AIzaSyBUuAwmRxuRE2DxL251-GZ9_V1Kg3auvEo\",\n    authDomain: \"cp-instagram-clone-65bd8.firebaseapp.com\",\n    databaseURL: \"https://cp-instagram-clone-65bd8.firebaseio.com\",\n    projectId: \"cp-instagram-clone-65bd8\",\n    storageBucket: \"cp-instagram-clone-65bd8.appspot.com\",\n    messagingSenderId: \"956173477105\",\n    appId: \"1:956173477105:web:a1177fe18bca57b65e3550\",\n    measurementId: \"G-JE1HL3E2RM\"\n})\n\nconst db = firebaseApp.firestore();\nconst auth = firebase.auth();\nconst storage = firebase.storage();\n\nexport { db, auth, storage };","import React, { useState, useEffect } from 'react'\nimport firebase from 'firebase';\n\nimport { db } from './firebase'\n\nimport Avatar from '@material-ui/core/Avatar';\n\nimport './Post.css'\n\nfunction Post({postId, user, username, caption, imgURL}) {\n\n    const [comments, setComments] = useState([]);\n    const [comment, setComment] = useState('');\n\n    useEffect(() => {\n        let unsubscribe;\n        if(postId) {\n            unsubscribe = db\n                .collection(\"posts\")\n                .doc(postId)\n                .collection(\"comments\")\n                .orderBy('timestamp', 'desc')\n                .onSnapshot((snapshot) => {\n                    setComments(snapshot.docs.map((doc) => doc.data()))\n                })\n        }\n        return () => {\n            unsubscribe();\n        }\n\n    }, [postId]);\n\n    const postComment = (event) => {\n        event.preventDefault();\n\n        db.collection(\"posts\").doc(postId).collection(\"comments\").add({\n            text: comment,\n            username: user.displayName,\n            timestamp: firebase.firestore.FieldValue.serverTimestamp()\n        });\n        setComment('');\n    }\n\n    return (\n        <div className=\"post\">\n            <div className=\"post__header\">\n                <Avatar \n                    className=\"post__avatar\"\n                    alt=\"patryk\" \n                    src=\"/static/images/avatar/1.jpg\" \n                />\n                <h3>{username}</h3>\n            </div>\n            \n\n            <img className=\"post__image\" src={imgURL} alt=\"\"/>\n\n            <h4 className=\"post__text\"><strong>{username}: </strong> {caption}</h4>\n\n            <div className=\"post__comments\">\n                {comments.map((comment) => (\n                    <p>\n                        <strong>{comment.username}</strong> {comment.text}\n                    </p>\n                ))}\n            </div>\n\n            {user && (\n                <form className=\"post__commentBox\">\n                    <input\n                        className=\"post__input\"\n                        type=\"text\"\n                        placeholder=\"Type a comment...\"\n                        value={comment}\n                        onChange={(e) => setComment(e.target.value)}\n                    />\n                    <button \n                        className=\"post__button\"\n                        disabled={!comment}\n                        type=\"submit\"\n                        onClick={postComment}\n                    >\n                    Post\n                    </button>\n\n                </form>\n            )}\n        </div>\n    )\n}\n\nexport default Post\n","import React, { useState } from 'react'\n\nimport { Button, Input } from '@material-ui/core';\n\nimport firebase from 'firebase';\nimport { db, storage } from './firebase'\n\nimport './ImageUpload.css';\n\nfunction ImageUpload(props) {\n\n    const [image, setImage] = useState(null);\n    const [progress, setProgress] = useState(0);\n    const [caption, setCaption] = useState('');\n\n    const handleChange = (e) => {\n        if(e.target.files[0]) {\n            setImage(e.target.files[0 ])\n        }\n    }\n\n    const handleUpload = (e) => {\n        const uploadTask = storage.ref(`images/${image.name}`).put(image);\n        uploadTask.on(\n            \"state_changed\",\n            (snapshot) => {\n                const progress = Math.round(\n                    (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n                );\n                setProgress(progress)\n            },\n           (error) => {\n               console.log(error);\n               alert(error.message);\n           },\n           () => {\n                storage\n                    .ref(\"images\")\n                    .child(image.name)\n                    .getDownloadURL()\n                    .then(url => {\n                        db.collection(\"posts\").add({\n                            timestamp : firebase.firestore.FieldValue.serverTimestamp(),\n                            caption : caption,\n                            imgURL : url,\n                            username : props.username\n                        });\n                    setProgress(0);\n                    setCaption('');\n                    setImage(null);\n\n                    })\n           }\n        )\n    }\n\n    return (\n        <div className=\"imageUpload\"> \n            <div className=\"imageUpload__inputs\">\n                <progress className=\"imageUpload__progress\" value={progress} max=\"100\" />\n                <input type=\"text\" placeholder=\"Enter a caption...\" onChange={event => setCaption(event.target.value )} value={caption}/>\n                <input type=\"file\" onChange={handleChange}/>\n                <Button onClick={handleUpload}>Upload</Button>\n            </div>\n            \n        </div>\n    )\n}\n\n\nexport default ImageUpload\n\n","import React, { useState, useEffect } from 'react';\n\nimport { Button, Input } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles'; \nimport Modal from '@material-ui/core/Modal'; \nimport firebase from 'firebase';\nimport { db, auth } from './firebase'\nimport InstagramEmbed from 'react-instagram-embed';\n\nimport Post from './Post';\nimport ImageUpload from './ImageUpload';\nimport './App.css';\n\n\nfunction getModalStyle() {\n  const top = 50;\n  const left = 50;\n\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`,\n  };\n}\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    position: 'absolute',\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n}));\n\nfunction App() {\n  const classes = useStyles();\n  const [modalStyle] = useState(getModalStyle);\n\n  const [posts, setPosts] = useState([]);\n  const [open, setOpen] = useState(false);\n  const [openSignIn, setOpenSignIn] = useState(false);\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged((authUser) => {\n      if (authUser) {\n        console.log(authUser);\n        setUser(authUser);\n\n      } else {\n        setUser(null)        \n      }\n    })\n\n    return () => {\n      unsubscribe();\n    }\n\n  }, [user, username])\n\n  useEffect(() => {\n    db.collection('posts').orderBy('timestamp', 'desc').onSnapshot(snapshot => {\n      setPosts(snapshot.docs.map(doc => ({\n        id : doc.id,\n        post: doc.data(),\n      })))\n    })\n  }, []);\n\n  const signUp = (event) => {\n    event.preventDefault();\n\n    auth.createUserWithEmailAndPassword(email, password)\n      .then((authUser) => {\n        return authUser.user.updateProfile({\n          displayName : username\n        })\n      })\n      .catch((error) => alert(error.message));\n\n      setOpen(false);\n  };\n\n  const signIn = (event) => {\n    event.preventDefault();\n    \n    auth.signInWithEmailAndPassword(email, password)\n    .catch((error) => alert(error.message));\n\n    setOpenSignIn(false)\n  }\n\n  return (\n    <div className=\"App\">\n      <Modal open={open} onClose={() => setOpen(false)} >\n        <div style={modalStyle} className={classes.paper}>\n          <center>\n            <img className=\"app__headerImage\" src=\"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png\" />\n          </center>\n          <form className=\"app__signup\">\n            \n            <Input \n                placeholder=\"username\"\n                type=\"text\"\n                value={username}\n                onChange={(e) => setUsername(e.target.value)}\n            />\n            <Input \n              placeholder=\"email\"\n              type=\"text\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n            />\n            <Input \n              placeholder=\"password\"\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n              <Button type=\"submit\" onClick={signUp}>Sign Up</Button>\n          </form>\n          \n        </div>\n      </Modal>\n\n      <Modal open={openSignIn} onClose={() => setOpenSignIn(false)} >\n        <div style={modalStyle} className={classes.paper}>\n          <center>\n            <img className=\"app__headerImage\" src=\"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png\" />\n          </center>\n          <form className=\"app__signup\">\n            \n            <Input \n              placeholder=\"email\"\n              type=\"text\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n            />\n            <Input \n              placeholder=\"password\"\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n              <Button type=\"submit\" onClick={signIn}>Sign In </Button>\n          </form>\n          \n        </div>\n      </Modal>\n        \n        <div className=\"app__header\">\n          <img className=\"app__headerImage\" src=\"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png\" />\n\n          {user ?\n            <Button onClick={() => auth.signOut()}>Logout</Button> \n          : \n            <div className=\"app__loginContainer\">\n              <Button onClick={() => setOpen(true)}>Sign Up</Button>\n              <Button onClick={() => setOpenSignIn(true)}>Sign In</Button>\n            </div>\n          }\n        </div>\n\n        <div className=\"app__posts\">\n        {\n          posts.map(({id, post}) => (\n            <Post key={id} postId={id} user={user} username={post.username} caption={post.caption} imgURL={post.imgURL} />\n          ))\n        }\n        </div>\n\n        {user?.displayName ? \n          (<ImageUpload username={user.displayName} />)\n        :\n          (<h3>Log in to upload.</h3>)  \n        }\n        \n        \n\n        \n\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}